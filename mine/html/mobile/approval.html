{% load humanize %}
<!doctype html>
<html lang="en" ng-app="app">
<head>
  <meta charset="utf-8">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  
  <title>My App</title>  
  
  <link rel="stylesheet" href="/static/mobile_ui/css/onsenui.css">  
  <link rel="stylesheet" href="/static/mobile_ui/css/onsen-css-components-blue-theme.css">  
  <link rel="stylesheet" href="/static/mobile_ui/styles/app.css"/>

  <script src="/static/mobile_ui/js/angular/angular.min.js"></script>    
  <script src="/static/mobile_ui/js/onsenui.min.js"></script>    
  <!-- <script src="js/app.js"></script>  -->

  <script>
    angular.module('app', ['onsen']);

    angular.module('app').controller('AppController', function($scope) {
    });
  </script>

  <style>
    .tab {
      line-height: 1;
    }
    .tab-icon {
      font-size: 24px;
      padding: 0;
      margin: 0;
      vertical-align: top;
      line-height: 28px;
    }
    .tab-label {
      line-height: 11px;
      vertical-align: top;
      font-size: 11px;
    }

    .profile-wrapper {
      padding: 16px 10px 0 10px;
    }

    .profile-image {
      width: 50px;
      height: 50px;
      border-radius: 100%;
      -webkit-border-radius: 100%;
      background-color: #ccc;
    }

    .profile-name {
      font-size: 18px;
      padding: 4px 0 2px 0;
    }

    .profile-email {
      font-size: 15px;
      opacity: 0.4;
    }

    .switch--list-item {
      margin-right: 0px;
    }

    .settings-header {
      font-weight: 500;
      font-size: 14px;
      opacity: 0.4;
      padding: 10px 0 0px 10px;
      margin-bottom: -4px;
    }

    .settings-list {
      margin-top: 10px;
    }

    .item {
      padding: 10px;
      line-height: 1;
    }
    .item-thum {
      background-color: #ccc;
      width: 50px;
      height: 50px;
      border-radius: 100%;
      -webkit-border-radius: 100%;
    }
    .item-title {
      font-size: 15px;
      font-weight: 500;
    }
    .item-desc {
      font-size: 14px;
      color: #666;
      line-height: 1.3;
      margin: 4px 0 0 0;
      padding: 0 30px 0 0;
    }
    .item-label {
      font-size: 12px;
      color: #999;
      float: right;
    }
  </style>
</head>

<body >    
    <ons-tabbar>
    <ons-tab active="true" page="home.html">
      <div class="tab">
        <ons-icon icon="ion-home" class="tab-icon"></ons-icon>
        <div class="tab-label">Details</div>
      </div>
    </ons-tab>
    <ons-tab page="worklog.html">
      <div class="tab">
        <ons-icon icon="ion-compose" class="tab-icon"></ons-icon>
        <div class="tab-label">Approve/Reject</div>
      </div>
    </ons-tab>

  </ons-tabbar>
  <ons-template id="home.html">
    <ons-navigator>
     <ons-page>

      <ons-toolbar>
          <div class="left"><a href="/mobile/app/" style="text-decoration:None"><ons-toolbar-button ><ons-icon icon=""></ons-icon>Home</ons-toolbar-button></a></div>
          <div class="center">Ticket Approval</div>
          <div class="right"></div>
        </ons-toolbar>

      <ons-list modifier="inset" style="margin-top: 10px">
        <ons-list-item class="item">
          <ons-row>
           <!--  <ons-col width="60px"> 
              <div class="item-thum"></div>
            </ons-col> -->
            <ons-col>
              <header>
                <span class="item-title">{{ticket.ticketid}}</span>
                <span class="item-label">{{ticket.summary}}</span>
              </header>
              <p class="item-desc">{{ticket.description}}</p>
            </ons-col>
          </ons-row>
        </ons-list-item>

        <ons-list-item modifier="chevron">
          Created On: {{ticket.creationdate|naturaltime}}
        </ons-list-item>
      </ons-list>

      <ons-list style="margin-top: 10px">
        <ons-list-item class="item">
          <header>
            <span class="item-title">Affected Person:</span>
          </header>
          <p class="item-desc">{{ticket.affectedperson}}</p>
        </ons-list-item>
        <ons-list-item class="item">
          <header>
            <span class="item-title">Contact Number:</span>
          </header>
          <p class="item-desc">{{ticket.affectedphone}}</p>
        </ons-list-item>
        <ons-list-item class="item">
          <header>
            <span class="item-title">Reported Person:</span>
          </header>
          <p class="item-desc">{{ticket.reportedby}}</p>
        </ons-list-item>
        <ons-list-item class="item">
          <header>
            <span class="item-title">Contact Email:</span>
          </header>
          <p class="item-desc">{{ticket.affectedemail}}</p>
        </ons-list-item>
        <ons-list-item class="item">
          <header>
            <span class="item-title">Ticket Category:</span>
          </header>
          <p class="item-desc">{{ticket.category}}</p>
        </ons-list-item>
        <ons-list-item class="item">
          <header>
            <span class="item-title">Project Name:</span>
          </header>
          <p class="item-desc">{{ticket.projectname}}</p>
        </ons-list-item>
        <ons-list-item class="item">
          <header>
            <span class="item-title">Quantity:</span>
          </header>
          <p class="item-desc">{{ticket.quantity}}</p>
        </ons-list-item>
        <ons-list-item class="item">
          <header>
            <span class="item-title">Request Type:</span>
          </header>
          <p class="item-desc">{{ticket.request_type}}</p>
        </ons-list-item>
      </ons-list>

      <br>

    </ons-page>
    </ons-navigator>
    </ons-template>


    <ons-template id="worklog.html">
    <ons-navigator>
     <ons-page>

      <ons-toolbar>
          <div class="left"><a href="/mobile/app/" style="text-decoration:None"><ons-toolbar-button ><ons-icon icon=""></ons-icon>Home</ons-toolbar-button></a></div>
          <div class="center">Ticket Approval</div>
          <div class="right"></div>
        </ons-toolbar>

    <form action="/mobile/app/ticket/approval/{{approval.id}}" method="POST">{% csrf_token %}
      <ons-list modifier="inset" style="margin-top: 10px">  


       <ons-list-item modifier="tappable">
          <label class="radio-button radio-button--list-item">
            <input type="radio" value="true" name="option" checked="checked">
            <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
            Approve
          </label>
        </ons-list-item>

        <ons-list-item modifier="tappable">
          <label class="radio-button radio-button--list-item">
            <input type="radio" value="false" name="option">
            <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
            Reject
          </label>
        </ons-list-item>

    
        <ons-list-item class="item">
          <ons-row>
            <ons-col>
              <ons-list-item>
          <textarea class="textarea textarea--transparent" name="note" placeholder="Remark" style="width: 100%; height: 100px;" required></textarea>
        </ons-list-item>
            </ons-col>
          </ons-row>
        </ons-list-item>
        <button type="submit" style="background: None;width: 100%;border: None;text-align: left;font-size: 15px;">
        <ons-list-item modifier="chevron">
          Update
        </ons-list-item>
        </button>
      </ons-list>
      </form>

      <ons-list style="margin-top: 10px">
        {% for worklog in worklogs %}
        <ons-list-item class="item">
          <header>
            
          </header>
          <span class="item-desc">{{worklog.owner}} {{worklog.note}}</span>
          <p class="item-desc">
            {% if worklog.remark %} with remark 
            {{ worklog.remark }}
            {% endif %}
             at {{worklog.time}}
          </p>
        </ons-list-item>
        {% endfor %}
      </ons-list>

      <br>

    </ons-page>
    </ons-navigator>
    </ons-template>
<script src="/static/customer/js/plugins/jquery/jquery-1.10.2.min.js" type="text/javascript"></script>

    <script>
$(document).ready(function(){$("body").hide().fadeIn(500);});
    </script>

</body>
</html>
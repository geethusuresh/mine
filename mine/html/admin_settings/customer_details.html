{% load humanize %}
{% load zone %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Oneconsole | Dashboard</title>
        {% include "components/css.html"%}
        <style>
            @media screen and (max-width: 640px) {
                table {
                    overflow-x: auto;
                    display: block;
                }
            }
        </style>
        <link rel="stylesheet" type="text/css" href="/static/asset/nifty.min.css">
        <script src="/static/customer/js/plugins/jquery/jquery-1.10.2.min.js" type="text/javascript"></script>
        <script src="/static/customer/js/plugins/pace/pace.min.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="/static/asset/bootstrap-select.min.css">
    </head>
    <body class="fixed" style="font-size:13px">
        {% include "components/header.html"%}
        <div class="wrapper">
            {% if "Customer_Dashboard" in request.session.logged_user_priv %}
                {% include "side_bar/customer.html"%}
            {% else %}
                {% include "side_bar/sidebar.html"%}
            {% endif %}
            <div class="rightside">
                <div class="page-head" style="margin-top:10px">
                    <h1><small></small></h1>
                    <ol class="breadcrumb">
                        <li>You are here:</li>
                        <li><a href="/">Home</a></li>
                        {% if "Devel_admin_access" in request.session.logged_user_priv %}
                            <li><a href="/admin_settings/admin_dashboard/">Admin Dashboard</a></li>
                            <li><a href="/admin_settings/customers/all/">Customers</a></li>
                            <li class="active">Details</li>
                        {% else %}
                            <li><a href="/customers/controlpanel/">Control Panel</a></li>
                            <li class="active">Advanced</li>
                        {% endif %}
                    </ol>
                </div>
                {% include "components/msg_div.html" %}
                <div class="content">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="panel">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Customer Details</h3>
                                </div>
                                <div class="panel-body">
                                    <form method="post" action="/admin_settings/customers/{{customer.id}}/">{% csrf_token %}
                                        <div class="col-sm-6">
                                            <dl class="dl-horizontal">
                                                <dt>CustomerID :</dt>
                                                <dd>
                                                    <input type="text" name="customer_id" readonly value="{{customer.customerid}}" class="form-control">
                                                </dd><br/>
                                                <dt>Description :</dt>
                                                <dd>
                                                    <textarea name="desc" class="form-control">{{customer.description}}</textarea>
                                                </dd><br/>
                                                <dt>Creation Date :</dt>
                                                <dd><input type="text" class="form-control" value="{{customer.enterdate|date:'m-d-Y'}}"  title = 'Date Format YYYY-MM-DD' required name="enterdate" readonly></dd> <br/>
                                                <dt>Send Email Notifications : </dt>
                                                <dd>
                                                    <select class="form-control" name="send_email" required>
                                                        <option value="">--Select Send Email Notification Status --</option>
                                                        <option value="True" {% if customer.is_send_mail == True %} selected {% endif %}>Yes</option>
                                                        <option value="False" {% if customer.is_send_mail == False %} selected {% endif %}>No</option>
                                                    </select>
                                                </dd><br/>
                                                <!-- <dt>SR Approval </dt>
                                                <dd>
                                                    <select class="form-control" name="sr_approval" required>
                                                        <option value="">--Select SR Approval Status --</option>
                                                        <option value="True" {% if customer.sr_approval_enabled == True %} selected {% endif %}>Yes</option>
                                                        <option value="False" {% if customer.sr_approval_enabled == False %} selected {% endif %}>No</option>
                                                    </select>
                                                </dd><br/> -->
                                                {% if customer.active %}
                                                    <dt></dt>
                                                    <dd><a href="/admin_settings/customers/{{customer.id}}/?activate=0" class="btn btn-danger"> Deactivate</a></dd>
                                                {% else %}
                                                    <dt></dt>
                                                    <dd><a href="/admin_settings/customers/{{customer.id}}/?activate=1" class="btn btn-success"> Activate</a></dd>
                                                {% endif %}
                                            </dl>
                                        </div>
                                        <div class="col-sm-6">
                                            <dl class="dl-horizontal">
                                                <dt>Customer Name :</dt>
                                                <dd>
                                                    <input type="text" name="name" value="{{customer.customername}}" class="form-control" required>
                                                </dd><br/>
                                                <dt>Currency :</dt>
                                                <dd>
                                                    <select class="form-control" name="currency" id="curreny_list" required>
                                                        <option value="">--Select--</option>
                                                        <option value="INR" {% if customer.currency == "INR" %} selected {% endif %}>INR</option>
                                                        <option value="USD" {% if customer.currency == "USD" %} selected {% endif %}>USD</option>
                                                    </select>
                                                    {% comment %}
                                                    <!-- <div class="col-sm-10">
                                                        <select class="form-control" name="currency" id="curreny_list" required>
                                                            <option value="">--Select--</option>
                                                            {% for currency in currency_list %}
                                                                <option value="{{ currency.currency_value }}" {% if customer.currency == currency.currency_value %} selected {% endif %}>{{ currency.currency_value }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div> -->
                                                    <!-- <div class="col-sm-2">
                                                        <a href="#" data-toggle="modal" data-target="#add_currency" class="btn btn-success" title="New Currency">+</a>
                                                    </div> -->
                                                    {% endcomment %}
                                                </dd><br/>
                                                <dt>Language Code</dt>
                                                <dd><input type="text" name="langcode" value="{{customer.langcode}}" class="form-control"></dd><br/>
                                                <dt>Clearing Act</dt>
                                                <dd><input type="text" name="clearing_act" value="{{customer.clearingact}}" class="form-control"></dd><br/>
                                                <!-- <dt>Email Suppression</dt>
                                                <dd>
                                                    <select class="form-control" name="email_suppression" required>
                                                        <option value="">--Select Email Suppression Status --</option>
                                                        <option value="True" {% if customer.email_suppresed == True %} selected {% endif %}>Yes</option>
                                                        <option value="False" {% if customer.email_suppresed == False %} selected {% endif %}>No</option>
                                                    </select>
                                                </dd><br/> -->
                                                <dt></dt>
                                                <dd>
                                                    <input class="btn btn-success" type="submit" name="submit" value="Save">
                                                </dd>
                                            </dl>
                                        </div>
                                    </form>
                                    <div class="col-sm-12">
                                        <hr/>
                                    </div>
                                </div>
                                <div class="panel-heading">
                                    <h3 class="panel-title">Priliminary Settings</h3>
                                </div>
                                <div class="panel-body">
                                    <div class="col-sm-12" style="margin-top:10px">
                                        <a href="/admin_settings/assign_support_team/{{customer.id}}/" class="btn btn-pink btn-labeled fa fa-times" style="margin-right:5px;">Support Team</a>
                                        <a href="#" data-toggle="modal" data-target="#settings" class="btn btn-success">Manage Settings</a>
                                    </div>
                                </div>
                                <div class="panel-heading">
                                    <h3 class="panel-title">Customer Settings</h3>
                                </div>
                                <div class="panel-body">
                                    <div class="col-sm-12">
                                        <ul class="nav nav-tabs">
                                        {% if profile.is_devel_admin %}
                                            <li class="active">
                                                <a data-toggle="tab" href="#role_details">
                                                    <i class="fa fa-lg"></i> Roles
                                                </a>
                                            </li>
                                        {% endif %}
                                            <li {% if not profile.is_devel_admin %} class="active" {% endif %}>
                                                <a data-toggle="tab" href="#group_management">
                                                    <i class="fa fa-lg"></i>
                                                    Groups
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#template_management" data-toggle="tab">
                                                    Templates
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#mail_box_setting" data-toggle="tab"> Email Ticket Settings </a>
                                            </li>
                                            <li>
                                                <a href="#ldap_settings" data-toggle="tab"> Authentication Settings </a>
                                            </li>
                                            <li>
                                                <a href="#category_tab" data-toggle="tab"> Category Settings</a>
                                            </li>
                                        </ul>
                                        <div class="tab-content">
                                            {% if profile.is_devel_admin %}
                                                <div class="tab-pane fade in active" id="role_details">
                                                    <div class="col-sm-12" style="margin-top:10px;">
                                                        <div class="newtoolbar">
                                                            <div class="table-toolbar-left">
                                                                <a href="#" class="btn btn-warning btn-labeled fa fa-times" data-target="#create_role" data-toggle="modal" style="margin-right:5px;">Create Role</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-12">
                                                        <table class="table table-stripped" id="role_table">
                                                            <thead>
                                                                <tr>
                                                                    <th style="display:none;">ID</th>
                                                                    <th>Role</th>
                                                                    <th>Customer</th>
                                                                    <th>Description</th>
                                                                    <th># Privileges</th>
                                                                    <th>Edit</th>
                                                                    <th>Delete</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            {% endif %}
                                            <div class="tab-pane {% if not profile.is_devel_admin %} fade in active {% endif %} " id="group_management">
                                                <div class="col-sm-12" style="margin-top:10px;">
                                                    <div class="newtoolbar">
                                                        <div class="table-toolbar-left">
                                                           <a href="#" data-toggle="modal" data-target="#create_group" class="btn btn-danger btn-labeled fa fa-times" style="margin-right:5px;">Create Group</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <table class="table table-stripped" id="group_table">
                                                        <thead>
                                                            <tr>
                                                                <th style="display:none">ID</th>
                                                                <th>Workgroup</th>
                                                                <th>Description</th>
                                                                <th>Status</th>
                                                                <th>Edit</th>
                                                                <th>Delete</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="template_management">
                                                <div class="col-sm-12" style="margin-top:10px;">
                                                    <div class="newtoolbar">
                                                        <div class="table-toolbar-left">
                                                            <a href="/admin_settings/copy_templates/" class="btn btn-success btn-labeled fa fa-times" style="margin-right:5px;">Copy All Templates</a>
                                                        </div>
                                                        <div class="table-toolbar-left" style="display:none">
                                                            <a href="#" data-toggle="modal" data-target="#create_email_template" class="btn btn-success btn-labeled fa fa-times" style="margin-right:5px;">Create</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <table class="table table-stripped" id="template_table">
                                                        <thead>
                                                            <tr>
                                                                <th style="display:none">ID</th>
                                                                <th>Name</th>
                                                                <th>Subject</th>
                                                                <th>View/Edit</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="mail_box_setting">
                                                <div class="col-sm-12 pad-all" style="margin-top:10px;">
                                                    {% if customer.emailcron_set.all|length == 1 %}
                                                        <form method="post" action="/admin_settings/email_ticket_settings/edit/{{customer.emailcron_set.all.0.id}}/">{% csrf_token %}
                                                            <div class="col-sm-6">
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Server : </label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="server" type="text" required value="{{customer.emailcron_set.all.0.server}}">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Login : </label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="login" type="text" required value="{{customer.emailcron_set.all.0.login}}">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Password : </label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="paswd" type="password" required value="{{customer.emailcron_set.all.0.paswd}}" >
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">From Address for notifications : <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;From address for all email notifications from Oneconsole for this customer&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="from_email" type="email" required value="{{customer.emailcron_set.all.0.from_email}}">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-6">
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Protocol : <a title="" data-original-title="" href="#fakelink" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Supported Protocol: IMAP.&lt;strong&gt; " data-toggle="tooltip"></a></label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="protocol" type="text" required value="{{customer.emailcron_set.all.0.protocol}}" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Port : </label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="port" type="text" required value="{{customer.emailcron_set.all.0.port}}" >
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label"> Default Workgroup : <a title="" data-original-title="" href="#fakelink" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Default workgroup assigned for tickets created via email. &lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                    <div class="col-lg-7">
                                                                        <select class="form-control" required name="workgroup">
                                                                            <option value="">--Select Workgroup--</option>
                                                                            {% for wrk_grp in customer.workgroup_set.all %}
                                                                                <option value="{{ wrk_grp.id }}" {% if customer.emailcron_set.all.0.workgroup == wrk_grp %} selected {% endif %}> {{ wrk_grp.workgroup }}</option>
                                                                            {% endfor %}
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Status : </label>
                                                                    <div class="col-lg-7">
                                                                        <label>Enable </label>
                                                                        <input type="radio" name="status" required {% if customer.emailcron_set.all.0.status == True %} checked {% endif %} value="true" />
                                                                        <label>Disable</label>
                                                                        <input type="radio" name="status" required {% if customer.emailcron_set.all.0.status == False %} checked {% endif %} value="false" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-10 pad-all">
                                                                <button type="submit" class="btn btn-primary btn-labeled fa fa-times pull-right">Save Changes</button>
                                                            </div>
                                                        </form>
                                                    {% elif customer.emailcron_set.all|length > 1 %}
                                                        <a href="#" data-toggle="modal" data-target="#create_email_cron" class="btn btn-success btn-labelled fa fa-times"> Create New</a>
                                                        <table class="table table-stripped">
                                                            <thead>
                                                                <tr>
                                                                    <th>#</th>
                                                                    <th>Server</th>
                                                                    <th>Login</th>
                                                                    <th>View/Edit</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% for cron in customer.emailcron_set.all %}
                                                                    <tr>
                                                                        <td>{{ forloop.counter }}</td>
                                                                        <td>{{ cron.server }}</td>
                                                                        <td>{{ cron.login }}</td>
                                                                        <td><a href="/admin_settings/email_ticket_settings/edit/{{cron.id}}/" class="btn btn-success" target="_blank"><i class="fa fa-edit"></i></a></td>
                                                                    </tr>
                                                                {% endfor %}
                                                            </tbody>
                                                        </table>
                                                    {% else %}
                                                        <form method="post" action="/admin_settings/email_cron/create/{{customer.id}}/">{% csrf_token %}
                                                            <div class="col-sm-6">
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Server : </label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="server" type="text" required >
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Login : </label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="login" type="text" required >
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Password : </label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="paswd" type="password" required >
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">From Address for notifications : <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;From address for all email notifications from Oneconsole for this customer&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="from_email" type="email" required>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-6">
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Protocol : <a title="" data-original-title="" href="#fakelink" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Supported Protocol: IMAP &lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="protocol" type="text" required value="IMAP" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label">Port : </label>
                                                                    <div class="col-lg-7">
                                                                        <input class="form-control" name="port" type="text" required >
                                                                    </div>
                                                                </div>
                                                                <div class="form-group pad-all">
                                                                    <label class="col-lg-5 control-label"> Default Workgroup : <a title="" data-original-title="" href="#fakelink" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Default workgroup assigned for tickets created via email.&lt;strong&gt; " data-toggle="tooltip"></a></label>
                                                                    <div class="col-lg-7">
                                                                        <select class="form-control" required name="workgroup">
                                                                            <option value="">--Select Workgroup--</option>
                                                                            {% for wrk_grp in customer.workgroup_set.all %}
                                                                                <option value="{{ wrk_grp.id }}" {% if customer.emailcron_set.all.0.workgroup == wrk_grp %} selected {% endif %}> {{ wrk_grp.workgroup }}</option>
                                                                            {% endfor %}
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-12">
                                                                <div class="form-group pad-all">
                                                                    <button type="submit" class="btn btn-primary btn-labeled fa fa-times pull-left">Create</button>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="ldap_settings">
                                                <div class="col-sm-12" style="margin-top:10px;">
                                                    {% if customer.ldapauthentication %}
                                                        <div class="form-group">
                                                            <a href="/admin_settings/customers/{{customer.id}}/ldap_auth/?activate=false" class="btn btn-danger btn-labeled fa fa-times"> Disable Active Directory Authentication </a>
                                                            <hr/>
                                                        </div>
                                                        {% if customer.ldap_auth_settings_set.all %}
                                                            <form method="post" action="/admin_settings/ldap_auth/edit/{{customer.ldap_auth_settings_set.all.0.id}}/">{% csrf_token %}
                                                                <h4 class="text-thin text-center text-bold">Update Authentication Settings</h4>
                                                                <div class="col-sm-6">
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-5 control-label">Ldap Server IP : <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;eg: ldaps://192.168.1.1:3269 .  Connectivity to Global Catalog preferred.&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                        <div class="col-lg-7">
                                                                            <input class="form-control" name="ldapserverip" type="text" required value="{{customer.ldap_auth_settings_set.all.0.ldapserverip}}">
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-5 control-label">Ldap Base DN : </label>
                                                                        <div class="col-lg-7">
                                                                            <input class="form-control" name="ldapbasedn" type="text" required value="{{customer.ldap_auth_settings_set.all.0.ldapbasedn}}">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-5 control-label">Ldap Username : <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Default username for simple authentication at LDAP server.&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                        <div class="col-lg-7">
                                                                            <input class="form-control" name="ldapusername" type="text" required value="{{customer.ldap_auth_settings_set.all.0.ldapusername}}" >
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-5 control-label">Ldap Password : <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Password of the default user added above.&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                        <div class="col-lg-7">
                                                                            <input class="form-control" name="ldappassword" type="password" required value="{{customer.ldap_auth_settings_set.all.0.ldappassword}}">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12">
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-3 control-label">Ldap Search Filter : </label>
                                                                        <div class="col-lg-9">
                                                                            <textarea class="form-control" required name="ldapsearchfilter" rows="3" placeholder="Ldap Search Filter">
                                                                                {{customer.ldap_auth_settings_set.all.0.ldapsearchfilter}}
                                                                            </textarea><br/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-3 control-label">Ldap Search Attribute : </label>
                                                                        <div class="col-lg-9">
                                                                            <textarea class="form-control" name="ldapsearchattribute" rows="3" placeholder="Ldap Search Attribute">
                                                                                {{customer.ldap_auth_settings_set.all.0.ldapsearchattribute}}
                                                                            </textarea><br/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pad-all">
                                                                        <div class="col-lg-12">
                                                                            <button type="submit" class="btn btn-primary btn-labeled fa fa-times pull-left">Save Changes</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        {% else %}
                                                            <form method="post" action="/admin_settings/ldap_auth/create/{{customer.id}}/">{% csrf_token %}
                                                                <h4 class="text-thin text-center text-bold">Create Authentication Settings</h4>
                                                                <div class="col-sm-6">
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-5 control-label">Ldap Server IP : <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;eg: ldaps://192.168.1.1:3269 .  Connectivity to Global Catalog preferred.&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                        <div class="col-lg-7">
                                                                            <input class="form-control" name="ldapserverip" type="text" required placeholder="Ldap Server IP">
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-5 control-label">Ldap Base DN : </label>
                                                                        <div class="col-lg-7">
                                                                            <input class="form-control" name="ldapbasedn" type="text" required placeholder="Ldap Base DN">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-5 control-label">Ldap Username : <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Default username for simple authentication at LDAP server.&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                        <div class="col-lg-7">
                                                                            <input class="form-control" name="ldapusername" type="text" required placeholder="Ldap Username">
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-5 control-label">Ldap Password : <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Password of the default user added above.&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                                                        <div class="col-lg-7">
                                                                            <input class="form-control" name="ldappassword" type="password" required placeholder="Ldap Password">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12">
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-3 control-label">Ldap Search Filter : </label>
                                                                        <div class="col-lg-9">
                                                                            <textarea name="ldapsearchfilter" required class="form-control" rows="3" placeholder="Ldap Search Filter"></textarea>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pad-all">
                                                                        <label class="col-lg-3 control-label">Ldap Search Attribute : </label>
                                                                        <div class="col-lg-9">
                                                                            <textarea name="ldapsearchattribute" class="form-control" rows="3" placeholder="Ldap Search Attribute"></textarea>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pad-all">
                                                                        <div class="col-lg-12">
                                                                            <button type="submit" class="btn btn-primary btn-labeled fa fa-times">Create</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        {% endif %}
                                                    {% else %}
                                                        <div class="form-group pad-all">
                                                            <a href="/admin_settings/customers/{{customer.id}}/ldap_auth/?activate=true" class="btn btn-success btn-labeled fa fa-times"> Enable Active Directory Authentication</a><a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;If enabled, accounts will be authenticated via  Active Directory&lt;strong&gt;" data-toggle="tooltip"></a>
                                                            <hr/>
                                                        </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="category_tab">
                                                <div class="col-sm-12" style="margin-top:10px;">
                                                    <div class="newtoolbar">
                                                        <div class="table-toolbar-left">
                                                            <a href="#" class="btn btn-success btn-labeled fa fa-times" style="margin-right:5px;" data-toggle="modal" data-target="#create_category">Create Category</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <table class="table table-stripped" id="category_table">
                                                    <thead>
                                                        <tr>
                                                            <th style="display:none">ID</th>
                                                            <th>Category</th>
                                                            <th>Description</th>
                                                            <th>View/Edit</th>
                                                            <th>Delete</th>
                                                        </tr>
                                                    </thead>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="create_email_cron" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button"  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="ModalLabel">Create New Email settings </h4>
                    </div>
                    <div class="modal-body">
                        <form method="post" action="/admin_settings/email_cron/create/{{customer.id}}/">{% csrf_token %}
                            <div class="form-group pad-all">
                                <label class="col-lg-5 control-label">Server : </label>
                                <div class="col-lg-7">
                                    <input class="form-control" name="server" type="text" required >
                                </div>
                            </div>
                            <div class="form-group pad-all">
                                <label class="col-lg-5 control-label">Login : </label>
                                <div class="col-lg-7">
                                    <input class="form-control" name="login" type="text" required >
                                </div>
                            </div>
                            <div class="form-group pad-all">
                                <label class="col-lg-5 control-label">Password : </label>
                                <div class="col-lg-7">
                                    <input class="form-control" name="paswd" type="password" required >
                                </div>
                            </div>
                            <div class="form-group pad-all">
                                <label class="col-lg-5 control-label">From Address for Notifications:<a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;From address for all email notifications from Oneconsole for this customer&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                <div class="col-lg-7">
                                    <input class="form-control" name="from_email" type="email" required>
                                </div>
                            </div>
                            <div class="form-group pad-all">
                                <label class="col-lg-5 control-label">Protocol : <a title="" data-original-title="" href="#fakelink" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Supported Protocol: IMAP &lt;strong&gt;" data-toggle="tooltip"></a></label>
                                <div class="col-lg-7">
                                    <input class="form-control" name="protocol" type="text" required value="IMAP" readonly>
                                </div>
                            </div>
                            <div class="form-group pad-all">
                                <label class="col-lg-5 control-label">Port : </label>
                                <div class="col-lg-7">
                                    <input class="form-control" name="port" type="text" required >
                                </div>
                            </div>
                            <div class="form-group pad-all">
                                <label class="col-lg-5 control-label"> Default Workgroup : <a title="" data-original-title="" href="#fakelink" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;Default workgroup assigned for tickets created via email.&lt;strong&gt; " data-toggle="tooltip"></a></label>
                                <div class="col-lg-7">
                                    <select class="form-control" required name="workgroup">
                                        <option value="">--Select Workgroup--</option>
                                        {% for wrk_grp in customer.workgroup_set.all %}
                                            <option value="{{ wrk_grp.id }}" {% if customer.emailcron_set.all.0.workgroup == wrk_grp %} selected {% endif %}> {{ wrk_grp.workgroup }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group pad-all">
                                <button type="submit" class="btn btn-primary btn-labeled fa fa-times pull-left">Create</button>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="border:0px">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="create_role" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button"  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="ModalLabel">Create Role </h4>
                    </div>
                    <div class="modal-body">
                        <form method="post" action="/admin_settings/create_role/{{customer.id}}/" >{% csrf_token %}
                            <label><strong>Name</strong></label>
                            <input type="text" name="name" class="form-control" required/><br/>
                            <label><strong>Description</strong></label>
                            <textarea name="desc" class="form-control" required></textarea><br/>
                            <button type="submit" class="btn btn-success" style="float:right">Submit</button>
                        </form>
                    </div>
                    <div class="modal-footer" style="border:0px">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="create_group" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button"  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="ModalLabel">Create Group </h4>
                    </div>
                    <div class="modal-body">
                        <form method="post" action="/admin_settings/create_workgroup/{{customer.id}}/" >{% csrf_token %}
                            <label><strong>Name</strong></label>
                            <input type="text" name="name" class="form-control" required/><br/>
                            <label><strong>Description</strong></label>
                            <textarea name="desc" class="form-control" ></textarea><br/>
                            <button type="submit" class="btn btn-success" style="float:right">Submit</button>
                        </form>
                    </div>
                    <div class="modal-footer" style="border:0px">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="add_currency" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button"  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="ModalLabel">Create Currency </h4>
                    </div>
                    <div class="modal-body">
                        <!-- <form method="post" action="/admin_settings/create_currency/" id="create_cur">{% csrf_token %} -->
                        <label><strong>Currency</strong></label>
                        <input type="text" name="name" class="form-control" required id="cur_name"/><br/>
                        <button type="submit" class="btn btn-success" style="float:right" onclick="create_new_cur()">Submit</button>
                        <p class="btn btn-danger" style="display:none" id="cur_msg_box"></p>
                        <!-- </form> -->
                    </div>
                    <div class="modal-footer" style="border:0px">
                    </div>
                </div>
            </div>
        </div>
        <!-- create_category -->
        <div class="modal fade" id="create_category" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button"  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="ModalLabel">Create Category </h4>
                    </div>
                    <div class="modal-body">
                        <form method="post" action="/admin_settings/create_category/{{customer.id}}/" id="create_cat_obj">{% csrf_token %}
                            <label><strong>Name</strong></label>
                            <input type="text" name="name" class="form-control" required/><br/>
                            <label><strong>Description</strong></label>
                            <textarea name="desc" class="form-control" ></textarea><br/>
                            <label><strong>Type of Category</strong></label>
                            <select class="form-control" id="category_type" name="category_type" required>
                                <option value="">--Select Category--</option>
                                <option value="cat">Category</option>
                                <option value="sub_cat">Sub Category</option>
                            </select><br/>
                            <label class="parent_data"><strong>Parent</strong></label>
                            <select name="parent" class="form-control parent_data" id="parent_id">
                                <option value="0">--Select Parent--</option>
                                {% for cat in category_data %}
                                    <option value="{{ cat.id }}">{{ cat.name }}</option>
                                {% endfor %}
                            </select>
                            <span class="btn btn-danger" id="error_dat" style='float:left'></span><br/>
                            <button type="submit" class="btn btn-success" style="float:right">Submit</button>
                        </form>
                    </div>
                    <div class="modal-footer" style="border:0px">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="create_email_template" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button"  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="ModalLabel">Create Email Template </h4>
                    </div>
                    <div class="modal-body">
                        <form method="post" action="/admin_settings/customers/{{customer.id}}/email_templates/" id="create_new_etemplate_obj">{% csrf_token %}
                            <label><strong>Name</strong></label>
                            <input type="text" name="name" class="form-control" required/><br/>
                            <label><strong>Subject</strong></label>
                            <textarea name="subject" class="form-control" ></textarea><br/>
                            <label><strong>Body</strong></label>
                            <textarea name="body" class="form-control" ></textarea><br/>
                            <button type="submit" class="btn btn-success" style="float:right">Submit</button>
                        </form>
                    </div>
                    <div class="modal-footer" style="border:0px">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="settings" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button"  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="ModalLabel">Manage Customer Settings </h4>
                    </div>
                    <div class="modal-body">
                        <form method="post" action="{% url 'feature_settings' customer.id %}">{% csrf_token %}
                            <div class="col-sm-12">
                                <div class="col-sm-6">
                                    <label>SR Approval <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to send the Approvals for Service Request Tickets.&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="sr_approval" required>
                                        <option value="">--Select SR Approval Status --</option>
                                        <option value="True" {% if customer.sr_approval_enabled == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.sr_approval_enabled == False %} selected {% endif %}>No</option>
                                    </select>
                                    <label>Category Change <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to change the category once the category assigned to the new ticket.&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="category_change" required>
                                        <option value="">--Select--</option>
                                        <option value="True" {% if customer.category_change == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.category_change == False %} selected {% endif %}>No</option>
                                    </select>
                                    <label>Add Attachment <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to add attachments to ticket once its closed &lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="add_attachment" required>
                                        <option value="">--Select--</option>
                                        <option value="True" {% if customer.add_attachment == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.add_attachment == False %} selected {% endif %}>No</option>
                                    </select>
                                    <label>Truncate Email Distribution List <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to truncate the email distribution&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="shrink_to_emails" required>
                                        <option value="">--Select--</option>
                                        <option value="True" {% if customer.shrink_to_emails == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.shrink_to_emails == False %} selected {% endif %}>No</option>
                                    </select>
                                    <label>Search Filter <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables an additional search filter in Reports&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="custom_filter_activation" required id="cust_filter">
                                        <option value="">--Select--</option>
                                        <option value="True" {% if customer.custom_filter_activation == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.custom_filter_activation == False %} selected {% endif %}>No</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <label>Email Suppression <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to suppress the email send to enduser&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="email_suppression" required>
                                        <option value="">--Select Email Suppression Status --</option>
                                        <option value="True" {% if customer.email_suppresed == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.email_suppresed == False %} selected {% endif %}>No</option>
                                    </select>
                                    <label>Reopen Closed Tickets <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to reopen the tickets once its closed&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="reopen_closed_tickets" required>
                                        <option value="">--Select--</option>
                                        <option value="True" {% if customer.reopen_closed_tickets == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.reopen_closed_tickets == False %} selected {% endif %}>No</option>
                                    </select>
                                    <label>Link Customer Ticket No <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to add customer ticket number&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="add_customer_ticket" required>
                                        <option value="">--Select--</option>
                                        <option value="True" {% if customer.add_customer_ticket == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.add_customer_ticket == False %} selected {% endif %}>No</option>
                                    </select>
                                    <label>Send Actual Contents <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to send the original contents of the ticket(all eml files) as an attachment&lt;strong&gt;" data-toggle="tooltip"></a></label>
                                    <select class="form-control" name="send_attachments" required>
                                        <option value="">--Select--</option>
                                        <option value="True" {% if customer.send_attachments == True %} selected {% endif %}>Yes</option>
                                        <option value="False" {% if customer.send_attachments == False %} selected {% endif %}>No</option>
                                    </select>
                                    <div {% if customer.custom_filter_activation == False %} style="display:none" {% endif %} id="cust_filter_div">
                                        <label>Filter Name <a title="" data-original-title="" href="#" class="add-tooltip fa fa-question-circle fa-lg unselectable" data-html="true" data-title="&lt;strong&gt;This feature enables to add the name of the search filter to be display on the reports &lt;strong&gt;" data-toggle="tooltip"></a></label>
                                        <input type="text" name="custom_filter_name" class="form-control" value="{{ customer.custom_filter_name }}" {% if customer.custom_filter_activation == True %} required {% endif %} id="cust_filter_name"> 
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 pad-top">
                                <button type="submit" class="btn btn-success" style="float:right">Submit</button>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="border:0px">
                    </div>
                </div>
            </div>
        </div>
        <!-- category delete confirmation box -->
        {% include "components/confirmation_box.html" %}
        {% include "components/footer.html" %}
        <script type="text/javascript" src="/static/asset/nifty.min.js"></script>
        <script type="text/javascript" src="/static/js/jquery.bootstrap.wizard.min.js"></script>
        <script src="/static/customer/js/plugins/bootstrapValidator/bootstrapValidator.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="/static/js/form-validation.js"></script>
        <script type="text/javascript">
            $('#role_table').dataTable( {
                "processing": true,
                "ajax": {
                    "processing": true,
                    "url": "/admin_settings/role_management/?name=roles&customer={{customer.id}}",
                    "dataSrc": ""
                },
                "columns": [
                    { "": "fields.id",sClass: "hidden" },
                    { "": "fields.rolename" },
                    { "": "fields.description" },
                    { "": "fields.customer" },
                    { "": "fields.privilege"},
                    { "": "","bSortable": false, },
                    { "": "","bSortable": false, }
                ],
                "columnDefs": [ {
                    "targets": 5,
                    "data": null,
                    "defaultContent": "<button class='btn btn-success'> <i class='fa fa-edit' > </i> </button>"
                }, {
                    "targets": 6,
                    "data": null,
                    "defaultContent": "<button class='btn btn-danger'> <i class='fa fa-trash-o' > </i> </button>"
                }]
            });
            $('#group_table').dataTable({
                "processing": true,
                "ajax": {
                    "processing": true,
                    "url": "/admin_settings/customers/{{customer.id}}/workgroups/",
                    "dataSrc": ""
                },
                "columns": [
                    { "": "id", sClass:"hidden"},
                    { "": "workgroup" },
                    { "": "description"},
                    { "": "status"},
                    { "": "", "bSortable": false, },
                    { "": "", "bSortable": false, }
                ],
                "columnDefs": [ {
                    "targets": 4,
                    "data": null,
                    "defaultContent": "<button class='btn btn-success'> <i class='fa fa-edit'> </i> </button> "
                }, {
                    "targets": 5,
                    "data": null,
                    "defaultContent": "<button class='btn btn-danger'> <i class='fa fa-trash-o'> </i> </button> "
                }]
            });
            $('#template_table').dataTable({
                "processing": true,
                "ajax": {
                    "processing": true,
                    "url": "/admin_settings/customers/{{customer.id}}/email_templates/",
                    "dataSrc": ""
                },
                "columns": [
                    { "": "id", sClass:"hidden"},
                    { "": "name" },
                    { "": "subject"},
                    { "": "", "bSortable": false, }
                ],
                "columnDefs": [ {
                    "targets": 3,
                    "data": null,
                    "defaultContent": "<button class='btn btn-success'> <i class='fa fa-edit'> </i> </button> "
                }]
            });
            $('#category_table').dataTable({
               "processing": true,
                "ajax": {
                    "processing": true,
                    "url": "/admin_settings/customers/{{customer.id}}/categories/",
                    "dataSrc": ""
                },
                "columns": [
                    { "": "id", sClass:"hidden"},
                    { "": "name" },
                    { "": "description"},
                    { "": "", "bSortable": false, },
                    { "": "", "bSortable": false, }
                ],
                "columnDefs": [ {
                    "targets": 3,
                    "data": null,
                    "defaultContent": "<button class='btn btn-success'> <i class='fa fa-edit'> </i> </button> "
                }, {
                    "targets": 4,
                    "data": null,
                    "defaultContent": "<button class='btn btn-danger'> <i class='fa fa-trash-o'> </i> </button> "
                }] 
            });
        </script>
        <script type="text/javascript">
            $('#role_table').on('click', 'td', function(e){
                var th = $(this).closest('table').find('th').eq( this.cellIndex );
                if (th.html() == "Edit") {
                    var row = $(this).prev().prev().prev().prev().prev().html();
                    document.location.href = "/admin_settings/roles/"+row+"/";
                } else if (th.html() == "Delete") {
                    var row = $(this).prev().prev().prev().prev().prev().prev().html();
                    $('#delete_id').val(row);
                    $('#confirm_msg').html('<strong> Are you sure you want to delete this role? </strong>');
                    $('#confirm_type').val('role')
                    $('#confirm_box').modal('toggle');
                }
            });
            $('#group_table').on('click', 'td', function(e){
                // var row = $(this).find('td:eq(0)').text();
                // if (row)
                //     document.location.href = "/admin_settings/workgroup/"+row+"/";
                var th = $(this).closest('table').find('th').eq( this.cellIndex );
                if (th.html() == "Edit") {
                    var row = $(this).prev().prev().prev().prev().html();
                    if (row)
                        document.location.href = "/admin_settings/workgroup/"+row+"/";
                } else if (th.html() == "Delete") {
                    var row = $(this).prev().prev().prev().prev().prev().html();
                    $('#delete_id').val(row);
                    $('#confirm_msg').html('<strong> Are you sure you want to delete this group? </strong>');
                    $('#confirm_type').val('group')
                    $('#confirm_box').modal('toggle');
                }
            });
            $('#template_table').on('click','td' , function(e){
                var th = $(this).closest('table').find('th').eq( this.cellIndex );
                if (th.html() == "View/Edit"){
                    var row = $(this).prev().prev().prev().html();
                    if (row)
                        document.location.href = "/admin_settings/email_templates/"+row+"/";
                }
            });
            $('#category_table').on('click', 'td', function(e) {
                var th = $(this).closest('table').find('th').eq( this.cellIndex );
                if (th.html() == "View/Edit"){
                    var row = $(this).prev().prev().prev().html();
                    if (row)
                        document.location.href = "/admin_settings/categories/"+row+"/";
                } else if (th.html() == "Delete") {
                    var row = $(this).prev().prev().prev().prev().html();
                    $('#delete_id').val(row);
                    $('#confirm_msg').html('<strong> Are you sure you want to delete this category? </strong>');
                    $('#confirm_type').val('category')
                    $('#confirm_box').modal('toggle');
                    // 
                    // if (row)
                    //     document.location.href = "/admin_settings/category/delete/"+row+"/";

                }
            })
        </script>
        <script type="text/javascript">
            function create_new_cur(){
                if ($('#cur_name').val().length > 0) {
                    $.ajax({
                        url :"/admin_settings/create_currency/",
                        type:"POST",
                        data: {
                            csrfmiddlewaretoken: "{{ csrf_token }}",
                            'name': $('#cur_name').val(),
                        },
                        success:function(data){
                            $('#curreny_list option:gt(0)').remove();
                            if (data.msg == 'ok') {
                                currency_list = data.currencies;
                                for (var i in currency_list){
                                    $("#curreny_list").append($('<option>', {value:currency_list[i], text:currency_list[i]}));
                                }
                                $('#curreny_list').val(data.c_value);
                                $('#add_currency').modal('hide');
                            } else {
                                $('#cur_msg_box').show();
                                $('#cur_msg_box').html(data.msg);
                            }
                        },
                        error: function(xhr,errmsg,err){
                            // console.log(xhr);
                        }
                    });
                } else {
                    $('#cur_msg_box').show();
                    $('#cur_msg_box').html("Please enter currency");
                }
            }
        </script>
        <script type="text/javascript">
            $('#category_type').on('change', function() {
                if ($("#category_type").val() == "sub_cat") {
                    $('.parent_data').show();
                    $('#parent_id').prop('required', true);
                } else {
                    $('.parent_data').hide();
                    $('#parent_id').prop('required', false);
                }
            })
        </script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('.parent_data').hide();
                $('#parent_id').prop('required', false);
                $('#error_dat').hide();
            })
        </script>
        <script type="text/javascript">
            $('#create_cat_obj').submit(function(e){
                if ($("#category_type").val() == "sub_cat" && $('#parent_id').val() == "0") {
                    $('#error_dat').html("Please choose parent");
                    $('#error_dat').show();
                    e.preventDefault();
                } else {
                    return;
                }
            })
        </script>
        <script type="text/javascript">
            function submit_ok() {
                var delete_type = $('#confirm_type').val();
                var delete_id = $('#delete_id').val();
                if (delete_type == 'category') {
                    document.location.href = "/admin_settings/category/delete/"+delete_id+"/";
                } else if (delete_type == 'role') {
                    document.location.href = "/admin_settings/roles/delete/?role_id="+delete_id;
                } else if (delete_type == 'group') {
                    document.location.href = "/admin_settings/group/delete/?workgroup="+delete_id;
                }
                $('#confirm_box').modal('hide');
            }
        </script>
        <script type="text/javascript">
            $('#cust_filter').on('change', function(){
                if (this.value == "True") {
                    $('#cust_filter_div').show();
                    $('#cust_filter_name').prop('required', true);
                } else if (this.value == "False") {
                    $('#cust_filter_div').hide();
                    $('#cust_filter_name').prop('required', false);
                }
            })
        </script>
    </body>
</html>